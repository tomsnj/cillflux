apiVersion: cert-manager.io/v1
kind: Certificate
metadata:
  name: vernemq-certificates
  namespace: vernemq 
spec:
  secretName: vernemq-certificates-secret
  issuerRef:
    name: letsencrypt-staging
    kind: ClusterIssuer
  commonName: mqtt.${SECRET_DOMAIN}
  dnsNames:
    - "mqtt.${SECRET_DOMAIN}"
  acme:
    config: 
    - dns01:
        provider: cloudflare
      domains:
        - mqtt.{SECRET_DOMAIN}
